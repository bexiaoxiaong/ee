import{s as e,a as t,b as a,c as i,d as l,w as s,n as c,i as n,o,e as d,f as r,t as u,g as m,h as g}from"./index-Bc8PLTTc.js";const f=((e,t)=>{const a=e.__vccOpts||e;for(const[i,l]of t)a[i]=l;return a})({onLoad(){this.generateQRCode("默认二维码内容")},data:()=>({logoUrl:"/static/logo.png",qrUrl:"",bgUrl:"",backgroundOptions:[{name:"蓝色星空",url:"/static/bg1.png"},{name:"城市夜景",url:"/static/bg2.png"},{name:"纯白背景",url:"/static/bg3.png"},{name:"没有背景",url:""},{name:"自定义背景",url:null}],ticketNumber:"4311314",ticketType:"成人票",ticketPrice:"¥88",ticketSeat:"A1",bookingNumber:"T20250721001",eventName:"2025 成都音乐节",userName:"张三",pageRef:null}),mounted(){this.pageRef=this.$refs.pageRef},methods:{async onSaveTiket(){navigator.clipboard&&window.ClipboardItem?t({itemList:["复制","保存"],success:async e=>{if(!window.html2canvas)return a({title:"截图插件未加载",icon:"none"});const t=this.$refs.pageRef,i=await html2canvas(t,{useCORS:!0});if(1===e.tapIndex){const e=i.toDataURL("image/png");if(/iP(hone|od|ad)/.test(navigator.userAgent))window.open(e,"_blank"),a({title:"长按图片保存",icon:"none"});else{const t=document.createElement("a");t.href=e,t.download="ticket.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}0===e.tapIndex&&i.toBlob((async e=>{if(!navigator.clipboard||!window.ClipboardItem)return a({title:"不支持剪贴板",icon:"none"});try{await navigator.clipboard.write([new ClipboardItem({"image/png":e})]),a({title:"已复制图片",icon:"success"})}catch(t){a({title:"复制失败",icon:"none"})}}),"image/png")}}):e({title:"提示",content:"当前浏览器不支持复制图片到剪贴板，请手动保存",showCancel:!1})},onPageTap(e){this.selectBackground()},selectBackground(){const e=this.backgroundOptions.map((e=>e.name));t({itemList:e,success:e=>{const t=this.backgroundOptions[e.tapIndex];"自定义背景"===t.name?i({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:e=>{e.tempFilePaths.length>0&&(this.bgUrl=e.tempFilePaths[0])}}):this.bgUrl=t.url}})},generateQRCode(e){QRCode.toDataURL(e).then((e=>{this.qrUrl=e})).catch((e=>{console.error("生成二维码失败",e)}))},changeQRCode(){e({title:"输入二维码内容",editable:!0,success:e=>{if(e.confirm&&e.content){const t=e.content.trim();if(!/^https:\/\/[^\s]+$/.test(t))return void a({title:"请输入完整的 HTTPS 链接",icon:"none"});this.generateQRCode(t)}}})},changeImage(){i({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:e=>{e.tempFilePaths.length>0&&(this.logoUrl=e.tempFilePaths[0])}})},changeTicketNumber(){e({title:"修改票券細號",content:"当前："+this.ticketNumber,editable:!0,placeholderText:"请输入新编号",success:e=>{e.confirm&&e.content&&(this.ticketNumber=e.content)}})},editField(t){const a={ticketType:"票种",ticketPrice:"票价",ticketSeat:"票位",bookingNumber:"订票编号",eventName:"活动名称",userName:"姓名"};e({title:`修改${a[t]}`,editable:!0,placeholderText:`请输入${a[t]}`,success:e=>{e.confirm&&""!==e.content&&(this[t]=e.content)}})}}},[["render",function(e,t,a,i,f,p){const k=m,b=n,h=g;return o(),l(b,{class:"page",ref:"pageRef",style:c({backgroundImage:"url("+f.bgUrl+")"})},{default:s((()=>[d(b,{class:"section logo-section"},{default:s((()=>[d(k,{class:"logo",src:f.logoUrl,onClick:p.changeImage},null,8,["src","onClick"])])),_:1}),d(b,{class:"section qr-section"},{default:s((()=>[d(k,{src:f.qrUrl,class:"qr",onClick:p.changeQRCode},null,8,["src","onClick"])])),_:1}),d(b,{class:"section ticket-section"},{default:s((()=>[d(h,{class:"ticket-text",onClick:p.changeTicketNumber},{default:s((()=>[r("票券細號："+u(f.ticketNumber),1)])),_:1},8,["onClick"]),d(b,{class:"ticket-info"},{default:s((()=>[d(b,{class:"info-item"},{default:s((()=>[d(h,{class:"info-label"},{default:s((()=>[r("票种")])),_:1}),d(h,{class:"info-value",onClick:t[0]||(t[0]=e=>p.editField("ticketType"))},{default:s((()=>[r(u(f.ticketType),1)])),_:1})])),_:1}),d(b,{class:"info-item with-divider"},{default:s((()=>[d(h,{class:"info-label"},{default:s((()=>[r("票价")])),_:1}),d(h,{class:"info-value",onClick:t[1]||(t[1]=e=>p.editField("ticketPrice"))},{default:s((()=>[r(u(f.ticketPrice),1)])),_:1})])),_:1}),d(b,{class:"info-item with-divider"},{default:s((()=>[d(h,{class:"info-label"},{default:s((()=>[r("票位")])),_:1}),d(h,{class:"info-value",onClick:t[2]||(t[2]=e=>p.editField("ticketSeat"))},{default:s((()=>[r(u(f.ticketSeat),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(b,{class:"detail-section"},{default:s((()=>[d(b,{class:"detail-title",onClick:p.onSaveTiket},{default:s((()=>[r("详细资讯")])),_:1},8,["onClick"]),d(b,{class:"detail-row"},{default:s((()=>[d(h,{class:"detail-label"},{default:s((()=>[r("订票编号")])),_:1}),d(h,{class:"detail-value",onClick:t[3]||(t[3]=e=>p.editField("bookingNumber"))},{default:s((()=>[r(u(f.bookingNumber),1)])),_:1})])),_:1}),d(b,{class:"divider"}),d(b,{class:"detail-row"},{default:s((()=>[d(h,{class:"detail-label"},{default:s((()=>[r("活动名称")])),_:1}),d(h,{class:"detail-value",onClick:t[4]||(t[4]=e=>p.editField("eventName"))},{default:s((()=>[r(u(f.eventName),1)])),_:1})])),_:1}),d(b,{class:"divider"}),d(b,{class:"detail-row"},{default:s((()=>[d(h,{class:"detail-label"},{default:s((()=>[r("姓名")])),_:1}),d(h,{class:"detail-value",onClick:t[5]||(t[5]=e=>p.editField("userName"))},{default:s((()=>[r(u(f.userName),1)])),_:1})])),_:1})])),_:1}),d(b,{class:"footer-section",onClick:p.onPageTap},null,8,["onClick"])])),_:1},8,["style"])}],["__scopeId","data-v-b89248e2"]]);export{f as default};
